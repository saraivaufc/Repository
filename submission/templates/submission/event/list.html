{% extends "submission/index.html" %}


{% load i18n static %}

{% block title %}{% endblock %}

{% block stylesheet %}
{% endblock %}

{% block events %}active{% endblock %}

{% block breadcrumbs %}
	{{ block.super }}
	<a href="{% url 'submission:event_list' page=1 %}" class="breadcrumb-item" >
		<i class="fa fa-wpforms"></i>
		{% trans "Events" %}
	</a>
{% endblock %}

{%  block page_title %}{% trans "List of Events" %}{% endblock %}

{% block content_inner %}
	<div class="col-md-4">
	<div class="row">
	{% if perms.submission.add_event %}
		<a href="{% url 'submission:event_create'  %}" class="btn btn-success">
			<i class="fa fa-plus"></i>
			{% trans "Create Event" %}
		</a>
	{% endif %}
	</div>
	</div>

	<div class="col-md-8">
	<div class="row float-xs-right">
		{% include "Repository/_form_search.html" %}
	</div>
	</div>

	<div class="col-md-12">
	<div class="row">
		<table class="table table-bordered">
			<thead class="thead-inverse">
				<tr>
					<th>{% trans "Name" %}</th>
					<th>{% trans "Date" %}</th>
					<th>{% trans "Stage" %}</th>
					<th>{% trans "Submissions" %}</th>
				</tr>
			</thead>

			<tbody>
				{% for event in object_list %}
					<tr>
						<td>
							<a href="{% url 'submission:event_detail' slug=event.slug %}">
								{{ event.name }}	
							</a>
						</td>
						<td>
							{{ event.date }}
						</td>
						<td>
							{% if event.stage.type == 'submission_open' %}
							<label class="tag tag-success">{{ event.stage.text }}</label>
							{% elif event.stage.type == 'submission_close'  %}
							<label class="tag tag-danger">{{ event.stage.text }}</label>
							{% else %}
							<label class="tag tag-primary">{{ event.stage.text }}</label>
							{% endif %}
						</td>
						<td>
							{% if event.stage.type == 'before_period' %}
								{{ event.submission_1_open }}
							{% else %}
								<a href="{% url 'submission:submission_list' event_slug=event.slug page=1 %}" data-toggle="tooltip" title="{% trans "My Submissions" %}">
									<i class="fa fa-upload"></i>
									{% trans "My Submissions" %}
								</a>
							{% endif %}
							{% if perms.submission.list_all_submissions and event.stage.type == 'submission_complete' %}
								/
								<a href="{% url 'submission:submission_list_all' event_slug=event.slug page=1 %}" data-toggle="tooltip" title="{% trans "All Submissions" %}">
									<i class="fa fa-upload"></i>
									{% trans "To revision" %}
								</a>
							{% endif %}
						</td>
					</tr>
				{% empty %}
					<tr>
						<td class="text-xs-center">{% trans "No Event found!" %}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	</div>

	<div class="col-md-12">
	<div class="row">
		{% include "Repository/_paginate.html" %}
	</div>
	</div>
{% endblock %}